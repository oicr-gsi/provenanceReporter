{% extends 'project_base.html' %}


{% block link %}
 <a href="{{ url_for('project_page', project_name=project['project_id']) }}">{{ project['project_id'] }}</a>
 <a href="{{ url_for('sequencing', project_name=project['project_id']) }}">Sequencing</a> 
 {% for i in pipelines %}
   {% if i in routes %}
     {% if i == 'Whole Genome' %}
       <a href="{{ url_for(routes[i], project_name=project['project_id']) }}">{{i}}</a>
     {% endif %}   
   {% else %}
       <a href="#{{i}}">{{i}}</a>
   {% endif %}  
 {% endfor %}   
 <a class="split" href="{{ miso_link }}" target="_blank">{{ sample_case }}</a> 

{% endblock %}


{% block content %}
  <div class="project_title">
    <p>
      <span style="font-size:30px; font-style:normal;"> Somatic callers analysis blocks </span>
    </p>  
  </div> 


  {% for block in names %}
     <div class="somatic_block">
     <p> {{ block.1 }} </p>
     <p> {{ block.0 }} </p>
     {% for sample in blocks[block.0] %}
       <p> {{ sample }} </p>
       
       <table id="simple_table">
          <thead>
           <th>workflow_run_if</th>
           <th>workflow</th>     
           <th>platform</th>
           </thead>     
       
       {% for d in blocks[block.0][sample] %}
         {% for workflow in d %}
           <tr>
             <td>{{d[workflow]['parent']['wfrun_id']}}</td>
             <td>{{d[workflow]['parent']['wf']}}</td>
             <td>{{d[workflow]['parent']['platform']}}</td>     
           </tr>
           {% if d[workflow]['children'] %}
             {% for k in d[workflow]['children'] %}
               <tr>
                 <td>{{k['wfrun_id']}}</td>
                 <td>{{k['wf']}}</td>
                 <td>{{k['platform']}}</td>
               </tr>     
             {% endfor %}         
           {% endif %}
         {% endfor %}    
       {% endfor %}
       </table>
     {% endfor %}  
     
     <img src="data:image/png;base64,{{figures[block.0]}}" alt="workflow_network" title="workflows"/>



     </div>
     <br>
  

  {% endfor %}




{% endblock %}


